!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class t{constructor(){this.cartCount=document.querySelector(".cart-count"),this.cartButtons=document.querySelectorAll(".product-card__cart"),this.cartItems=this.getCartFromStorage(),this.init()}init(){this.updateCartDisplay(),this.bindEvents(),console.log("Cart initialized with items:",this.cartItems)}bindEvents(){this.cartButtons.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),console.log("Add to cart button clicked"),this.addToCart(t)})})}getCartFromStorage(){try{const t=localStorage.getItem("cart");return t?JSON.parse(t):[]}catch(t){return console.error("Error reading cart from storage:",t),[]}}saveCartToStorage(){try{localStorage.setItem("cart",JSON.stringify(this.cartItems)),console.log("Cart saved to storage:",this.cartItems)}catch(t){console.error("Error saving cart to storage:",t)}}addToCart(t){console.log("Adding to cart...");const e=t.closest(".product-card"),i=this.generateProductId(e),n=e.querySelector(".product-card__name").textContent,s=this.getProductPrice(e);console.log("Product details:",{productId:i,productName:n,productPrice:s});const o=this.cartItems.findIndex(t=>t.id===i);-1!==o?(this.cartItems[o].quantity+=1,console.log("Item quantity increased")):(this.cartItems.push({id:i,name:n,price:s,quantity:1}),console.log("New item added to cart")),this.saveCartToStorage(),this.updateCartDisplay(),this.showAddToCartAnimation(t)}generateProductId(t){const e=t.querySelector(".product-card__name").textContent.trim(),i=t.querySelector(".product-card__current-price")||t.querySelector(".product-card__new-price");return`${e}-${i?i.textContent.trim():"0"}`.replace(/\s+/g,"-")}getProductPrice(t){const e=t.querySelector(".product-card__current-price"),i=t.querySelector(".product-card__new-price"),n=e||i;return n?n.textContent.trim():"0 ₽"}getTotalItems(){return this.cartItems.reduce((t,e)=>t+e.quantity,0)}updateCartDisplay(){const t=this.getTotalItems();console.log("Updating cart display, total items:",t),this.cartCount?t>0?(this.cartCount.textContent=`(${t})`,this.cartCount.style.display="inline",console.log("Cart count updated to:",t)):(this.cartCount.textContent="(0)",this.cartCount.style.display="none",console.log("Cart count hidden")):console.error("Cart count element not found!")}showAddToCartAnimation(t){const e=t.textContent;t.textContent="Добавлено",t.style.background="#09ABE4",t.style.color="white",t.style.pointerEvents="none",setTimeout(()=>{t.textContent=e,t.style.background="transparent",t.style.color="#09ABE4",t.style.pointerEvents="auto"},2e3),this.showNotification("Товар добавлен в корзину")}showNotification(t){document.querySelectorAll(".cart-notification").forEach(t=>t.remove());const e=document.createElement("div");e.className="cart-notification",e.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: #09ABE4;\n            color: white;\n            padding: 12px 20px;\n            border-radius: 4px;\n            z-index: 1000;\n            font-size: 14px;\n            font-weight: 600;\n        ",e.textContent=t,document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}}class e{constructor(){this.slides=document.querySelectorAll(".banner__slide"),this.indicators=document.querySelectorAll(".banner__indicator"),this.prevBtn=document.querySelector(".banner__nav--prev"),this.nextBtn=document.querySelector(".banner__nav--next"),this.currentSlide=0,this.init()}init(){this.showSlide(this.currentSlide),this.bindEvents()}bindEvents(){this.prevBtn.addEventListener("click",()=>this.prevSlide()),this.nextBtn.addEventListener("click",()=>this.nextSlide()),this.indicators.forEach((t,e)=>{t.addEventListener("click",()=>this.showSlide(e))})}showSlide(t){this.slides.forEach(t=>t.classList.remove("banner__slide--active")),this.indicators.forEach(t=>t.classList.remove("banner__indicator--active")),this.currentSlide=t,this.slides[this.currentSlide].classList.add("banner__slide--active"),this.indicators[this.currentSlide].classList.add("banner__indicator--active")}nextSlide(){this.currentSlide=(this.currentSlide+1)%this.slides.length,this.showSlide(this.currentSlide)}prevSlide(){this.currentSlide=(this.currentSlide-1+this.slides.length)%this.slides.length,this.showSlide(this.currentSlide)}}class i{constructor(){this.navLinks=document.querySelectorAll(".nav__link"),this.currentPath=window.location.pathname,this.init()}init(){this.setActiveNavItem()}setActiveNavItem(){this.navLinks.forEach(t=>{const e=t.getAttribute("href");this.currentPath.includes(e)&&"#"!==e&&t.classList.add("active")})}}class n{constructor(){this.compareButtons=document.querySelectorAll(".product-card__compare"),this.init()}init(){this.bindEvents()}bindEvents(){this.compareButtons.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.toggleCompare(t)})})}toggleCompare(t){t.classList.toggle("product-card__compare--active");const e=t.classList.contains("product-card__compare--active")?"Добавлено к сравнению":"Убрано из сравнения";this.showNotification(e)}showNotification(t){const e=document.createElement("div");e.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: #09ABE4;\n            color: white;\n            padding: 12px 20px;\n            border-radius: 4px;\n            z-index: 1000;\n            font-size: 14px;\n        ",e.textContent=t,document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}}class s{constructor(){this.promotionCards=document.querySelectorAll(".promotion-card"),this.promotionButtons=document.querySelectorAll(".promotion-card__button"),this.allPromotionsBtn=document.querySelector(".promotions__all-btn"),this.init()}init(){this.bindEvents()}bindEvents(){this.promotionButtons.forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation(),this.openPromotionDetails(t)})}),this.promotionCards.forEach(t=>{t.addEventListener("click",e=>{e.target.closest(".promotion-card__button")||this.openPromotionDetails(t)})}),this.allPromotionsBtn&&this.allPromotionsBtn.addEventListener("click",()=>{this.showAllPromotions()})}openPromotionDetails(t){const e=t.closest(".promotion-card"),i=e.querySelector(".promotion-card__title").textContent;console.log(`Открытие акции: ${i}`),e.style.transform="scale(0.95)",setTimeout(()=>{e.style.transform=""},150)}showAllPromotions(){console.log("Переход на страницу всех акций"),this.allPromotionsBtn.style.transform="scale(0.95)",setTimeout(()=>{this.allPromotionsBtn.style.transform=""},150)}}document.addEventListener("click",t=>{t.target.closest(".product-card__cart")&&console.log("Cart button clicked directly")});class o{constructor(){this.burger=document.querySelector(".header__burger"),this.nav=document.querySelector(".header__nav"),this.burger&&this.nav&&this.init()}init(){this.burger.addEventListener("click",()=>this.toggleMenu()),this.nav.addEventListener("click",t=>{t.target.classList.contains("nav__link")&&this.closeMenu()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&this.closeMenu()}),window.addEventListener("resize",()=>{window.innerWidth>768&&this.closeMenu()})}toggleMenu(){const t=!this.nav.classList.contains("active");this.nav.classList.toggle("active",t),this.burger.classList.toggle("active",t),document.body.classList.toggle("no-scroll",t)}closeMenu(){this.nav.classList.remove("active"),this.burger.classList.remove("active"),document.body.classList.remove("no-scroll")}}class r{constructor(t,e){this.root=t,this.itemSelector=e,this.items=Array.from(t.querySelectorAll(e)),this.index=0,this.nav=null,this.inited=!1,this.onResize=this.onResize.bind(this),this.tryInit(),window.addEventListener("resize",this.onResize)}isMobile(){return window.innerWidth<=768}tryInit(){!this.inited&&this.isMobile()&&this.items.length>1?(this.inited=!0,this.items.forEach((t,e)=>t.classList.toggle("is-active",0===e)),this.createNav()):this.inited&&!this.isMobile()&&this.destroy()}createNav(){this.nav=document.createElement("div"),this.nav.className="mobile-slider-nav",this.nav.innerHTML='\n          <button class="mobile-slider-nav__btn prev" aria-label="Предыдущий">‹</button>\n          <button class="mobile-slider-nav__btn next" aria-label="Следующий">›</button>\n        ',this.root.appendChild(this.nav),this.nav.querySelector(".prev").addEventListener("click",()=>this.prev()),this.nav.querySelector(".next").addEventListener("click",()=>this.next()),this.updateButtons()}updateButtons(){if(!this.nav)return;const t=this.nav.querySelector(".prev"),e=this.nav.querySelector(".next");t.disabled=0===this.index,e.disabled=this.index===this.items.length-1}showCurrent(){this.items.forEach((t,e)=>t.classList.toggle("is-active",e===this.index)),this.updateButtons()}prev(){this.index>0&&(this.index--,this.showCurrent())}next(){this.index<this.items.length-1&&(this.index++,this.showCurrent())}destroy(){this.nav&&(this.nav.remove(),this.nav=null),this.items.forEach(t=>t.classList.remove("is-active")),this.inited=!1}onResize(){this.tryInit()}}class c{constructor(){this.init()}init(){this.cart=new t,this.bannerSlider=new e,this.navigation=new i,this.productCards=new n,this.promotions=new s,this.mobileMenu=new o;const c=document.querySelector(".popular-products");c&&(this.popularSlider=new r(c,".product-card"));const a=document.querySelector(".promotions");a&&(this.promosSlider=new r(a,".promotion-card"))}}document.addEventListener("DOMContentLoaded",()=>{new c});
